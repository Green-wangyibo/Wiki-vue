<!--
 * @Author: your name
 * @Date: 2021-01-16 19:48:36
 * @LastEditTime: 2021-01-16 20:05:46
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \面试code\原生ajax.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        var ajax={
            // ajax发送get 请求
            get:function(url,fn){
                // 创建ajax对象
                var xhr=new XMLHttpRequest();
                // 准备请求
                xhr.open('get',url,true);
                // 监听ajax状态的变化
                xhr.onreadystatechange=function(){
                    if(xhr.readyState==4&&xhr.status==200){
                        // 从服务器获得资源
                        fn.call(this,xhr.responseText)
                    }
                }
                // 发送ajax请求
                xhr.send()
            },
            // ajax发送post请求
            post:function(url,data,fn){
                // 创建ajax对象
                var xhr=new XMLHttpRequest();
                // 请求配置
                xhr.open('post',url,true);
                // post请求必须设置请求头的信息
                xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');
                // 监听请求的状态
                xhr.onreadystatechange=function(){
                    // 如果请求成功
                    if(xhr.readystate==4&&xhr.status==200){
                        // 从服务器获得数据
                        fn.call(this,xhr.responsetext)
                    }
                }
                // 发送请求
                xhr.send(data);
            }
        }
    </script>
</body>
</html>